# 🧗‍♂️ 클라이밍 기록 관리 서비스 앱 ALLEX
![ReadMeTitle](https://github.com/user-attachments/assets/5f81374c-e918-4aaf-ac9e-de722f5479e4)
<br><br><br>


## 프로젝트 소개
“Allex”는 프랑스어의 Allez(가자!)와 Extreme(극한)의 합성어로, 클라이머들의 극한의 도전을 기록하고 관리합니다.  
기존 클라이밍 앱을 사용하면서 느꼈던 불편함을 바탕으로, 구성과 사용자의 편의성을 중심에 두고 설계했습니다.  
홈 화면에는 월간 기록을 통해 나의 성장을 한눈에 파악합니다. 실시간 기록을 통해 클라이밍을 하면서도 기록할 수 있습니다.  
Allex는 기능 개선과 새로운 기능 추가를 통해 점진적으로 발전하고 있습니다.  
앞으로도 사용자 중심의 업데이트를 계속해 나갈 예정입니다.

### 주요 기능
#### 1. 클라이밍 기록 및 통계
- 월간 클라이밍 통계 조회
- 캘린더 기반의 클라이밍 기록 조회 및 수기 등록

#### 2. 운동 중 실시간 기록
- 타이머 기반 실시간 클라이밍 운동 기록
- 실시간 동영상 촬영 및 간단한 편집 기능

#### 3. 클라이밍장 정보
- 국내 클라이밍 장 조회 (위치·시설 정보 포함)

#### 4. 난이도 필터링
- 스와이프를 통해 실시간 기록 시 사용하지 않는 난이도는 숨기고 필요시 다시 로드

#### 5. 찰영 옵션 설정
- 실시간 영상 기록 시 해상도, 화면 비율, 프레임 속도 설정
- 편집 기능 제공 (자르기)

#### 6. 위젯
- 최근 클라이밍 기록을 위젯에서 바로 확인 가능

<br><br>

## 프로젝트 정보
기획 및 개발: 2025.03.29 ~ 2025.04.08(10일간)  
유지 보수 및 기능 업데이트: 2025.04.09 ~  

🔗 [업데이트 이력 보기](CHANGELOG.md)
<br>

### 기술 스택
- **Framework** - UIKit, AVFoundation  
- **Library** - Lottie, Realm, RxSwift, RxDataSource, SnapKit, KingFisher, Firebase
- **Architecture** - MVVM-C  

🔗 [오픈소스 라이브러리 라이선스 보기](THIRD_PARTY_LICENSES.md)
<br><br>

### 기술 설명
- **최소 지원 iOS 버전**: iOS 16.0  
- **다크 모드**: 지원  
- **다국어 지원**: 영어 (`Localizable.strings`)
- **Local DB**: Realm
- **API**: Google Sheet (Rest API)
<br><br>

## 기술적 특징

### 아키텍처 선정 기준 (RxSwift + MVVM + Input/Output + Coordinator)
아키텍처를 선정 시, MVP처럼 빠른 개발이 목적이었다면 MVC를 선택했겠지만, 이번 프로젝트는 출시 및 유지 보수를 고려해 MVVM을 채택했습니다.  
과거 프로젝트에서는 View가 화면 전환까지 담당하던 구조에서 책임 분리의 필요성을 느꼈습니다. View는 UI만 담당하도록 Coordinator 패턴을 도입했습니다.

앱 실행 시 로그인 여부에 따라 진입 화면을 분기하며, 각 탭은 개별 코디네이터가 관리합니다. 현재는 View에서 Coordinator를 참조하지만,  
ViewMdoel이 흐름의 의도만 전달하고 Coordinator가 이를 구독해 처리하는 구조가 유연성과 테스트성 면에서 이상적이라고 생각하기 때문입니다.

MVVM 구조로 인해 ViewModel이 화면 상태, 흐름, UI 가공 로직까지 모두 담당해 책임이 무거워지는 문제가 있었습니다.  
이를 개선하기 위해 RxSwfit를 도입해 Input/Output 흐름을 명확하게 분리했습니다.  
RxSwift는 단순히 비동기 처리뿐만 아니라, 데이터 흐름을 선언적으로 설계할 수 있어서 가독성을 높이는 데 도움이 되었습니다. 

다만,  RxSwift의 Input/Output 패턴이 흐름을 분리해 주는 데는 효과적이지만, ViewModel의 책임을 줄이는 데에는 한계가 있었습니다.  
이를 해결하기 위해 다음 프로젝트에서는 ViewModel이 비즈니스 로직에만 집중할 수 있도록  
UI 상태나 화면 흐름은 별도의 레이어에서 관리하는 구조로 개선할 계획입니다.


### 정적 데이터에 대한 호출 최적화와 데이터 주입 구조 설계

Google Sheet API를 백엔드로 사용하면서, API 호출 수 제한을 고려한 구조 설계가 필요했습니다.  
클라이밍 장 데이터는 자주 바뀌지 않는 정적 데이터에 가까웠기 때문에, 앱 실행 시 한 번만 호출하고 전체 데이터를 가져오는 방식으로 과호출 가능성을 줄였습니다.  
데이터는 이미지가 포함되지 않은 텍스트 중심의 데이터라 UX 미치는 영향도 크지 않았고, 네트워크 사용량 절감에도 도움이 되었습니다.

Google Sheet API는 Home ViewModel에서 한 번만 호출되며, 응답 데이터를 “Shared Data” 객체에 저장합니다.  
해당 객체는 각 코디네이터에서 의존성 주입 방식(DI)으로 각 ViewModel에 전달되며, 공통 데이터를 일관되게 참조할 수 있도록 구조화했습니다.

클라이밍 데이터 구조가 정해지면, 로컬 DB를 도입해 데이터를 저장하고, 버전 정보를 기반으로 변경이 있을 때만 서버와 동기화하는 방향으로 확장할 계획입니다.

### 실시간 기록
실시간 기록 기능에서는 1초 간격으로 동작하는 타이머를 RxSWift 기반으로 구현하였습니다.  
타이머는 ConcurrentDispatchQueueScheduler를 통해 백그라운드 스레드에서 실행되며,  
UI가 업데이트가 필요한 시점에만 MainScheduler로 전환하여 앱의 성능 저하를 방지했습니다.

또한, 실시간 기록 중 화면이 꺼지면 앱이 백그라운드 상태로 전환되는 문제를 방지하기 위해 실시간 기록 시에는 isIdleTimerDisabled를 활용해 자동 잠금을 방지하였습니다.



### Realm 
Core Data는 Apple에서 제공하는 퍼스트 파티 프레임워크로, 데이터 변경 사항 추적 기능과 다양한 기능을 제공하지만,  
초기 설정이 복잡하고 러닝 커브가 높은 편입니다. 반면 Realm은 상대적으로 빠르게 적용할 수 있으며, 데이터 변경 사항 추적도 간단하게 구현할 수 있습니다.  
특히 Realm은 자체 경량 엔진과 메모리 매핑 기반 구조 덕분에, Core Data보다 더 빠른 성능을 보여줄 수 있어 **짧은 기간 내 앱 개발이 필요한 상황에서 더 적합한 선택**이라고 판단했습니다.


### RxSwfit 
UIKit 기반 앱을 리액티브 하게 설계하기 위해 RxSwift를 선택했습니다. Combine은 SwiftUI와 함께할 때 강력한 퍼스트 파티 프레임워크이지만,  
UIKit에서는 UI 이벤트 연동이 번거롭고, 실무 사례도 적은 편이라 RxCocoa를 활용한 RxSwift가 더 적합하다고 판단했습니다.

### 브랜치 전략
- Git Flow 전략을 기반으로 main, develop, feature 브랜치를 운영했습니다.
  - **main:** 배포 가능한 브랜치로, 언제든 배포 가능한 상태로 관리합니다.
  - **develop:** 새로운 기능 개발 및 버그 수정 등 모든 개발 작업을 포함합니다.
  - **feature:** 새로운 기능을 개발을 위한 브랜치로 develop에서 분기되며, 기능 개발이 완료되면 develop 브랜치로 병합합니다.

<br><br>

## 페이지별 기능

### [온보딩 및 회원가입]

- 앱 실행시 **온보딩 화면**이 나오며 다음 페이지로 이동됩니다.  
  - ✅ 회원가입이 완료된 경우 → **메인 화면**으로 이동
  - ❌ 회원가입이 안 된 경우 → **회원가입 화면**으로 이동
- 회원가입은 **닉네임만 필수 항목**이며, 다음 조건을 만족해야 합니다:
  - 공백을 제외한 **2~7자** 사이의 문자열

| 온보딩 및 회원가입 |
|:--------:|
| <img src="https://github.com/user-attachments/assets/59790eec-d299-45fd-911d-6caf8bf3b16c" width="350"/> | 
 
<br><br>

### [홈, 캘린더, 기록 등록]

- 홈 화면에서는 이번 달 **월간 클라이밍 기록**과  **가장 많이 방문한 클라이밍장**이 표시됩니다.
- 기록 등록 시에는 날짜, 클라이밍장, 운동 시간이 저장되며, 클라이밍장을 선택하면 **난이도 선택 화면**으로 이동합니다.
- 캘린더 화면에서는 다음과 같이 마커가 표시됩니다:
  - **현재 날짜**: 푸른색 마커
  - **기록이 있는 날짜**: 붉은색 마커  
  - **현재 날짜에 기록도 존재할 경우**: 푸른색 마커가 우선 적용됩니다
- 동일 날짜에 **2개 이상의 기록이 있는 경우**, **등록된 순서대로** 리스트에 표시됩니다.


| 홈, 캘린더, 기록 등록 |
|:--------:|
| <img src="https://github.com/user-attachments/assets/cdb15288-059a-48f4-9a39-b766c612edab" width="350"/> |

<br><br>

### [실시간 기록]

- **실시간 기록**은 클라이밍장을 선택한 후 시작되며, 이 시점부터 **타이머가 1초 단위로 작동**합니다.
- **원하지 않는 난이도는 스와이프 동작을 통해 숨길 수 있으며**, 이후 언제든지 다시 불러올 수 있습니다.
- 운동이 종료되면 기록에 대한 요약 화면이 표시됩니다.

| 실시간 기록 |
|:--------:|
| <img src="https://github.com/user-attachments/assets/e5703bb9-e724-414e-a4ef-5557ff7ee564" width="350"/> |

<br><br>

### [검색]

- **클라이밍장 검색**은 검색 버튼을 눌렀을 때 실행되며, 앱 실행 시 서버로부터 받은 데이터를 기반으로 로컬에 저장된 정보를 조회합니다.  
- 각 클라이밍장 상세 페이지에는 **장소 설명**, **주소**, **Instagram ID** 등이 포함되어 있으며, Instagram ID를 클릭하면 해당 계정으로 이동합니다.
- **정보 수정 요청하기** 버튼을 누르면, ALLEX 공식 Instagram 계정으로 이동됩니다.  
 
| 검색 |
|:--------:|
| <img src="https://github.com/user-attachments/assets/e7f88c1d-7222-48dc-8595-f3c85144f8a2" width="350"/> |

<br><br>














